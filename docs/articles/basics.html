<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to sgejobs • sgejobs</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to sgejobs">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sgejobs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.99.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/basics.html">Introduction to sgejobs</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/LieberInstitute/sgejobs">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Introduction to sgejobs</h1>
                        <h4 class="author">Leonardo Collado-Torres</h4>
            <address class="author_afil">
      Lieber Institute for Brain Development, Johns Hopkins Medical Campus<br><a class="author_email" href="mailto:#"></a><a href="mailto:lcolladotor@gmail.com">lcolladotor@gmail.com</a>
      </address>
                  
            <h4 class="date">7 November 2019</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/LieberInstitute/sgejobs/blob/master/vignettes/basics.Rmd"><code>vignettes/basics.Rmd</code></a></small>
      <div class="hidden name"><code>basics.Rmd</code></div>

    </div>

    
    
<div id="basics" class="section level1">
<h1 class="hasAnchor">
<a href="#basics" class="anchor"></a>Basics</h1>
<div id="install-sgejobs" class="section level2">
<h2 class="hasAnchor">
<a href="#install-sgejobs" class="anchor"></a>Install <em><a href="https://github.com/LieberInstitute/sgejobs">sgejobs</a></em>
</h2>
<p><code>R</code> is an open-source statistical environment which can be easily modified to enhance its functionality via packages. <em><a href="https://github.com/LieberInstitute/sgejobs">sgejobs</a></em> is a <code>R</code> package available via GitHub. <code>R</code> can be installed on any operating system from <a href="https://cran.r-project.org/">CRAN</a> after which you can install <em><a href="https://github.com/LieberInstitute/sgejobs">sgejobs</a></em> by using the following commands in your <code>R</code> session:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/ns-load.html">requireNamespace</a></span>(<span class="st">"remotes"</span>, <span class="dt">quietly =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">   <span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"remotes"</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4">remotes<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/remotes/man/install_github.html">install_github</a></span>(<span class="st">'LieberInstitute/sgejobs'</span>)</a></code></pre></div>
</div>
<div id="asking-for-help" class="section level2">
<h2 class="hasAnchor">
<a href="#asking-for-help" class="anchor"></a>Asking for help</h2>
<p>As package developers, we try to explain clearly how to use our packages and in which order to use the functions. But <code>R</code> and <code>JHPCE/SGE</code> have a steep learning curve so it is critical to learn where to ask for help. For JHPCE questions, please use check the <a href="https://jhpce.jhu.edu/contact/">JHPCE help page</a>. For <em><a href="https://github.com/LieberInstitute/sgejobs">sgejobs</a></em> please post issues in GitHub. However, please note that if you want to receive help you should adhere to the <a href="http://www.bioconductor.org/help/support/posting-guide/">posting guidelines</a>. It is particularly critical that you provide a small reproducible example and your session information so package developers can track down the source of the error.</p>
</div>
<div id="citing-sgejobs" class="section level2">
<h2 class="hasAnchor">
<a href="#citing-sgejobs" class="anchor"></a>Citing <em><a href="https://github.com/LieberInstitute/sgejobs">sgejobs</a></em>
</h2>
<p>We hope that <em><a href="https://github.com/LieberInstitute/sgejobs">sgejobs</a></em> will be useful for your research. Please use the following information to cite the package and the overall approach. Thank you!</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co">## Citation info</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/utils/citation.html">citation</a></span>(<span class="st">'sgejobs'</span>)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt; To cite package 'sgejobs' in publications use:</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt;   Leonardo Collado-Torres (2019). sgejobs: Helper functions for</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#&gt;   SGE jobs at JHPCE. R package version 0.99.1.</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="co">#&gt;   https://github.com/LieberInstitute/sgejobs</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">#&gt; A BibTeX entry for LaTeX users is</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="co">#&gt;   @Manual{,</span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="co">#&gt;     title = {sgejobs: Helper functions for SGE jobs at JHPCE},</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#&gt;     author = {Leonardo Collado-Torres},</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="co">#&gt;     year = {2019},</span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="co">#&gt;     note = {R package version 0.99.1},</span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="co">#&gt;     url = {https://github.com/LieberInstitute/sgejobs},</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"><span class="co">#&gt;   }</span></a></code></pre></div>
</div>
</div>
<div id="overview" class="section level1">
<h1 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h1>
<p>The package <em><a href="https://github.com/LieberInstitute/sgejobs">sgejobs</a></em> contains a few helper functions for those of you interacting with a <a href="https://arc.liv.ac.uk/trac/SGE">Son of Grid Engine</a><a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> high-performance computing cluster such as <a href="https://jhpce.jhu.edu/">JHPCE</a>.</p>
<p>To start off, load the package.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">'sgejobs'</span>)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt; Registered S3 method overwritten by 'pryr':</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt;   method      from</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt;   print.bytes Rcpp</span></a></code></pre></div>
<div id="creating-sge-job-bash-scripts" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-sge-job-bash-scripts" class="anchor"></a>Creating SGE job <code>bash</code> scripts</h2>
<p>At this point, if you are starting from stratch you might want to create a <code>bash</code> script for submitting an SGE job. For this purpose, <em><a href="https://github.com/LieberInstitute/sgejobs">sgejobs</a></em> contains two functions that help you build either a single SGE job (could be an array job) or a script that loops through some variables and creates SGE bash scripts. These are <a href="../articles/job_single.html"><code><a href="../reference/job_single.html">job_single()</a></code></a> and <a href="../articles/job_loop.html"><code><a href="../reference/job_loop.html">job_loop()</a></code></a>.</p>
<p><a href="../articles/job_single.html"><code><a href="../reference/job_single.html">job_single()</a></code></a> specifies many arguments that control common SGE job options such as the number of cores, the cluster queue, and memory requirements. Note that the resulting <code>bash</code> script contains some information that can be useful for reproducibility purposes such as the SGE job ID, the compute node it ran on, the list of modules loaded by the user, etc.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co">## job_single() builds a template bash script for a single job</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="kw"><a href="../reference/job_single.html">job_single</a></span>(<span class="st">'jhpce_job'</span>, <span class="dt">create_logdir =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co">#&gt; #!/bin/bash</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt; #$ -cwd</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co">#&gt; #$ -l mem_free=10G,h_vmem=10G,h_fsize=100G</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt; #$ -N jhpce_job</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">#&gt; #$ -o logs/jhpce_job.txt</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co">#&gt; #$ -e logs/jhpce_job.txt</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">#&gt; #$ -m e</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="co">#&gt; echo "**** Job starts ****"</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co">#&gt; date</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="co">#&gt; echo "**** JHPCE info ****"</span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15"><span class="co">#&gt; echo "User: ${USER}"</span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16"><span class="co">#&gt; echo "Job id: ${JOB_ID}"</span></a>
<a class="sourceLine" id="cb4-17" data-line-number="17"><span class="co">#&gt; echo "Job name: ${JOB_NAME}"</span></a>
<a class="sourceLine" id="cb4-18" data-line-number="18"><span class="co">#&gt; echo "Hostname: ${HOSTNAME}"</span></a>
<a class="sourceLine" id="cb4-19" data-line-number="19"><span class="co">#&gt; echo "Task id: ${SGE_TASK_ID}"</span></a>
<a class="sourceLine" id="cb4-20" data-line-number="20"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-21" data-line-number="21"><span class="co">#&gt; ## Load the R module (absent since the JHPCE upgrade to CentOS v7)</span></a>
<a class="sourceLine" id="cb4-22" data-line-number="22"><span class="co">#&gt; module load conda_R</span></a>
<a class="sourceLine" id="cb4-23" data-line-number="23"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-24" data-line-number="24"><span class="co">#&gt; ## List current modules for reproducibility</span></a>
<a class="sourceLine" id="cb4-25" data-line-number="25"><span class="co">#&gt; module list</span></a>
<a class="sourceLine" id="cb4-26" data-line-number="26"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-27" data-line-number="27"><span class="co">#&gt; ## Edit with your job command</span></a>
<a class="sourceLine" id="cb4-28" data-line-number="28"><span class="co">#&gt; Rscript -e "options(width = 120); sessioninfo::session_info()"</span></a>
<a class="sourceLine" id="cb4-29" data-line-number="29"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-30" data-line-number="30"><span class="co">#&gt; echo "**** Job ends ****"</span></a>
<a class="sourceLine" id="cb4-31" data-line-number="31"><span class="co">#&gt; date</span></a>
<a class="sourceLine" id="cb4-32" data-line-number="32"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-33" data-line-number="33"><span class="co">#&gt; ## This script was made using sgejobs version 0.99.1</span></a>
<a class="sourceLine" id="cb4-34" data-line-number="34"><span class="co">#&gt; ## available from http://research.libd.org/sgejobs/</span></a>
<a class="sourceLine" id="cb4-35" data-line-number="35"></a>
<a class="sourceLine" id="cb4-36" data-line-number="36"><span class="co">## if you specify task_num then it becomes an array job</span></a>
<a class="sourceLine" id="cb4-37" data-line-number="37"><span class="kw"><a href="../reference/job_single.html">job_single</a></span>(<span class="st">'jhpce_array_job'</span>, <span class="dt">create_logdir =</span> <span class="ot">FALSE</span>, <span class="dt">task_num =</span> <span class="dv">20</span>)</a>
<a class="sourceLine" id="cb4-38" data-line-number="38"><span class="co">#&gt; #!/bin/bash</span></a>
<a class="sourceLine" id="cb4-39" data-line-number="39"><span class="co">#&gt; #$ -cwd</span></a>
<a class="sourceLine" id="cb4-40" data-line-number="40"><span class="co">#&gt; #$ -l mem_free=10G,h_vmem=10G,h_fsize=100G</span></a>
<a class="sourceLine" id="cb4-41" data-line-number="41"><span class="co">#&gt; #$ -N jhpce_array_job</span></a>
<a class="sourceLine" id="cb4-42" data-line-number="42"><span class="co">#&gt; #$ -o logs/jhpce_array_job.$TASK_ID.txt</span></a>
<a class="sourceLine" id="cb4-43" data-line-number="43"><span class="co">#&gt; #$ -e logs/jhpce_array_job.$TASK_ID.txt</span></a>
<a class="sourceLine" id="cb4-44" data-line-number="44"><span class="co">#&gt; #$ -m e</span></a>
<a class="sourceLine" id="cb4-45" data-line-number="45"><span class="co">#&gt; #$ -t 1-20</span></a>
<a class="sourceLine" id="cb4-46" data-line-number="46"><span class="co">#&gt; #$ -tc 20</span></a>
<a class="sourceLine" id="cb4-47" data-line-number="47"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-48" data-line-number="48"><span class="co">#&gt; echo "**** Job starts ****"</span></a>
<a class="sourceLine" id="cb4-49" data-line-number="49"><span class="co">#&gt; date</span></a>
<a class="sourceLine" id="cb4-50" data-line-number="50"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-51" data-line-number="51"><span class="co">#&gt; echo "**** JHPCE info ****"</span></a>
<a class="sourceLine" id="cb4-52" data-line-number="52"><span class="co">#&gt; echo "User: ${USER}"</span></a>
<a class="sourceLine" id="cb4-53" data-line-number="53"><span class="co">#&gt; echo "Job id: ${JOB_ID}"</span></a>
<a class="sourceLine" id="cb4-54" data-line-number="54"><span class="co">#&gt; echo "Job name: ${JOB_NAME}"</span></a>
<a class="sourceLine" id="cb4-55" data-line-number="55"><span class="co">#&gt; echo "Hostname: ${HOSTNAME}"</span></a>
<a class="sourceLine" id="cb4-56" data-line-number="56"><span class="co">#&gt; echo "Task id: ${SGE_TASK_ID}"</span></a>
<a class="sourceLine" id="cb4-57" data-line-number="57"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-58" data-line-number="58"><span class="co">#&gt; ## Load the R module (absent since the JHPCE upgrade to CentOS v7)</span></a>
<a class="sourceLine" id="cb4-59" data-line-number="59"><span class="co">#&gt; module load conda_R</span></a>
<a class="sourceLine" id="cb4-60" data-line-number="60"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-61" data-line-number="61"><span class="co">#&gt; ## List current modules for reproducibility</span></a>
<a class="sourceLine" id="cb4-62" data-line-number="62"><span class="co">#&gt; module list</span></a>
<a class="sourceLine" id="cb4-63" data-line-number="63"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-64" data-line-number="64"><span class="co">#&gt; ## Edit with your job command</span></a>
<a class="sourceLine" id="cb4-65" data-line-number="65"><span class="co">#&gt; Rscript -e "options(width = 120); sessioninfo::session_info()"</span></a>
<a class="sourceLine" id="cb4-66" data-line-number="66"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-67" data-line-number="67"><span class="co">#&gt; echo "**** Job ends ****"</span></a>
<a class="sourceLine" id="cb4-68" data-line-number="68"><span class="co">#&gt; date</span></a>
<a class="sourceLine" id="cb4-69" data-line-number="69"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-70" data-line-number="70"><span class="co">#&gt; ## This script was made using sgejobs version 0.99.1</span></a>
<a class="sourceLine" id="cb4-71" data-line-number="71"><span class="co">#&gt; ## available from http://research.libd.org/sgejobs/</span></a></code></pre></div>
<p><a href="../articles/job_loop.html"><code><a href="../reference/job_loop.html">job_loop()</a></code></a> is a little bit more complicated since you have to specify the <code>loops</code> named list argument. The <code>loops</code> argument specifies the <code>bash</code> variable names and values to loop through for creating a series of <code>bash</code> scripts that will get submitted to SGE. This type of <code>bash</code> script is something we use frequently, for example in the <a href="https://github.com/LieberInstitute/brainseq_phase2/blob/master/twas/compute_weights.sh"><code>compute_weights.sh</code></a> script <a id="cite-Collado_Torres_2019"></a>(<a href="https://doi.org/10.1016/j.neuron.2019.05.013">Collado-Torres, Burke, Peterson, Shin, et al., 2019</a>). This type of script generator I believe is something <a href="http://alyssafrazee.com/">Alyssa Frazee</a> taught me back in the day which you can see in some old repositories such as <a href="https://github.com/leekgroup/derSoftware"><code>leekgroup/derSoftware</code></a>. Besides the <code>loops</code> argument, <a href="../articles/job_loop.html"><code><a href="../reference/job_loop.html">job_loop()</a></code></a> shares most of the options with <a href="../articles/job_single.html"><code><a href="../reference/job_single.html">job_single()</a></code></a>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="../reference/job_loop.html">job_loop</a></span>(</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">    <span class="dt">loops =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">region =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'DLPFC'</span>, <span class="st">'HIPPO'</span>), <span class="dt">feature =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'gene'</span>, <span class="st">'exon'</span>, <span class="st">'tx'</span>, <span class="st">'jxn'</span>)),</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">    <span class="dt">name =</span> <span class="st">'bsp2_test'</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4">)</a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt; #!/bin/bash</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt; ## Usage:</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">#&gt; # sh bsp2_test.sh</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt; ## Create the logs directory</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt; mkdir -p logs</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">#&gt; for region in DLPFC HIPPO; do</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co">#&gt;     for feature in gene exon tx jxn; do</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-16" data-line-number="16"><span class="co">#&gt;     ## Internal script name</span></a>
<a class="sourceLine" id="cb5-17" data-line-number="17"><span class="co">#&gt;     SHORT="bsp2_test_${region}_${feature}"</span></a>
<a class="sourceLine" id="cb5-18" data-line-number="18"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-19" data-line-number="19"><span class="co">#&gt;     # Construct shell file</span></a>
<a class="sourceLine" id="cb5-20" data-line-number="20"><span class="co">#&gt;     echo "Creating script bsp2_test_${region}_${feature}"</span></a>
<a class="sourceLine" id="cb5-21" data-line-number="21"><span class="co">#&gt;     cat &gt; .${SHORT}.sh &lt;&lt;EOF</span></a>
<a class="sourceLine" id="cb5-22" data-line-number="22"><span class="co">#&gt; #!/bin/bash</span></a>
<a class="sourceLine" id="cb5-23" data-line-number="23"><span class="co">#&gt; #$ -cwd</span></a>
<a class="sourceLine" id="cb5-24" data-line-number="24"><span class="co">#&gt; #$ -l mem_free=10G,h_vmem=10G,h_fsize=100G</span></a>
<a class="sourceLine" id="cb5-25" data-line-number="25"><span class="co">#&gt; #$ -N ${SHORT}</span></a>
<a class="sourceLine" id="cb5-26" data-line-number="26"><span class="co">#&gt; #$ -o logs/${SHORT}.txt</span></a>
<a class="sourceLine" id="cb5-27" data-line-number="27"><span class="co">#&gt; #$ -e logs/${SHORT}.txt</span></a>
<a class="sourceLine" id="cb5-28" data-line-number="28"><span class="co">#&gt; #$ -m e</span></a>
<a class="sourceLine" id="cb5-29" data-line-number="29"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-30" data-line-number="30"><span class="co">#&gt; echo "**** Job starts ****"</span></a>
<a class="sourceLine" id="cb5-31" data-line-number="31"><span class="co">#&gt; date</span></a>
<a class="sourceLine" id="cb5-32" data-line-number="32"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-33" data-line-number="33"><span class="co">#&gt; echo "**** JHPCE info ****"</span></a>
<a class="sourceLine" id="cb5-34" data-line-number="34"><span class="co">#&gt; echo "User: \${USER}"</span></a>
<a class="sourceLine" id="cb5-35" data-line-number="35"><span class="co">#&gt; echo "Job id: \${JOB_ID}"</span></a>
<a class="sourceLine" id="cb5-36" data-line-number="36"><span class="co">#&gt; echo "Job name: \${JOB_NAME}"</span></a>
<a class="sourceLine" id="cb5-37" data-line-number="37"><span class="co">#&gt; echo "Hostname: \${HOSTNAME}"</span></a>
<a class="sourceLine" id="cb5-38" data-line-number="38"><span class="co">#&gt; echo "Task id: \${SGE_TASK_ID}"</span></a>
<a class="sourceLine" id="cb5-39" data-line-number="39"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-40" data-line-number="40"><span class="co">#&gt; ## Load the R module (absent since the JHPCE upgrade to CentOS v7)</span></a>
<a class="sourceLine" id="cb5-41" data-line-number="41"><span class="co">#&gt; module load conda_R</span></a>
<a class="sourceLine" id="cb5-42" data-line-number="42"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-43" data-line-number="43"><span class="co">#&gt; ## List current modules for reproducibility</span></a>
<a class="sourceLine" id="cb5-44" data-line-number="44"><span class="co">#&gt; module list</span></a>
<a class="sourceLine" id="cb5-45" data-line-number="45"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-46" data-line-number="46"><span class="co">#&gt; ## Edit with your job command</span></a>
<a class="sourceLine" id="cb5-47" data-line-number="47"><span class="co">#&gt; Rscript -e "options(width = 120); print('${region}'); print('${feature}'); sessioninfo::session_info()"</span></a>
<a class="sourceLine" id="cb5-48" data-line-number="48"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-49" data-line-number="49"><span class="co">#&gt; echo "**** Job ends ****"</span></a>
<a class="sourceLine" id="cb5-50" data-line-number="50"><span class="co">#&gt; date</span></a>
<a class="sourceLine" id="cb5-51" data-line-number="51"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-52" data-line-number="52"><span class="co">#&gt; ## This script was made using sgejobs version 0.99.1</span></a>
<a class="sourceLine" id="cb5-53" data-line-number="53"><span class="co">#&gt; ## available from http://research.libd.org/sgejobs/</span></a>
<a class="sourceLine" id="cb5-54" data-line-number="54"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-55" data-line-number="55"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-56" data-line-number="56"><span class="co">#&gt; EOF</span></a>
<a class="sourceLine" id="cb5-57" data-line-number="57"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-58" data-line-number="58"><span class="co">#&gt;     call="qsub .${SHORT}.sh"</span></a>
<a class="sourceLine" id="cb5-59" data-line-number="59"><span class="co">#&gt;     echo $call</span></a>
<a class="sourceLine" id="cb5-60" data-line-number="60"><span class="co">#&gt;     $call</span></a>
<a class="sourceLine" id="cb5-61" data-line-number="61"><span class="co">#&gt;     done</span></a>
<a class="sourceLine" id="cb5-62" data-line-number="62"><span class="co">#&gt; done</span></a></code></pre></div>
</div>
<div id="submitting-sge-jobs" class="section level2">
<h2 class="hasAnchor">
<a href="#submitting-sge-jobs" class="anchor"></a>Submitting SGE jobs</h2>
<p>Once you fine-tune your SGE <code>bash</code> script, you can submit it with <code>qsub</code>. <em><a href="https://github.com/LieberInstitute/sgejobs">sgejobs</a></em> also contains some helper functions for a few different scenarios.</p>
<p>To start off, <a href="../articles/array_submit.html"><code><a href="../reference/array_submit.html">array_submit()</a></code></a> can take a local <code>bash</code> script and submit it for you. However, the need for it becomes more apparent when multiple tasks for an SGE array job fail. You can detect tasks that failed using <code>qstat | grep Eqw</code> or similar SGE commands. To build a vector of tasks that you need to re-run, <a href="../articles/parse_task_ids.html"><code><a href="../reference/parse_task_ids.html">parse_task_ids()</a></code></a> will be helpful.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co">## This is an example true output from "qstat | grep Eqw"</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="co">## 7770638 0.50105 compute_we lcollado     Eqw   08/16/2019 14:57:25                                    1 225001-225007:1,225009-225017:2,225019-225038:1,225040,225043,225047,225049</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">## parse_task_ids() can then take as input the list of task ids that failed</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4">task_ids &lt;-<span class="st"> </span><span class="kw"><a href="../reference/parse_task_ids.html">parse_task_ids</a></span>(<span class="st">'225001-225007:1,225009-225017:2,225019-225038:1,225040,225043,225047,225049'</span>)</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">task_ids</a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt; [1] "225001-225007:1" "225009-225017:2" "225019-225038:1" "225040-225040"  </span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt; [5] "225043-225043"   "225047-225047"   "225049-225049"</span></a></code></pre></div>
<p>Next, you can re-submit those task ids for the given SGE <code>bash</code> script that failed using <a href="../articles/array_submit.html"><code><a href="../reference/array_submit.html">array_submit()</a></code></a>. While in this example we are explicitely providing the output of <a href="../articles/parse_task_ids.html"><code><a href="../reference/parse_task_ids.html">parse_task_ids()</a></code></a> to <a href="../articles/array_submit.html"><code><a href="../reference/array_submit.html">array_submit()</a></code></a>, it is not neccessary since <a href="../articles/parse_task_ids.html"><code><a href="../reference/parse_task_ids.html">parse_task_ids()</a></code></a> is used internally by <a href="../articles/array_submit.html"><code><a href="../reference/array_submit.html">array_submit()</a></code></a>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co">## Choose a script name</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2">job_name &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">'array_submit_example_'</span>, <span class="kw"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span>())</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">## Create an array job on the temporary directory</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="kw"><a href="../reference/with_wd.html">with_wd</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(), {</a>
<a class="sourceLine" id="cb7-6" data-line-number="6">    <span class="co">## Create an array job script to use for this example</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7">    <span class="kw"><a href="../reference/job_single.html">job_single</a></span>(</a>
<a class="sourceLine" id="cb7-8" data-line-number="8">        <span class="dt">name =</span> job_name,</a>
<a class="sourceLine" id="cb7-9" data-line-number="9">        <span class="dt">create_shell =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb7-10" data-line-number="10">        <span class="dt">task_num =</span> <span class="dv">100</span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11">    )</a>
<a class="sourceLine" id="cb7-12" data-line-number="12"></a>
<a class="sourceLine" id="cb7-13" data-line-number="13">    <span class="co">## Now we can submit the SGE job for a set of task IDs</span></a>
<a class="sourceLine" id="cb7-14" data-line-number="14">    <span class="kw"><a href="../reference/array_submit.html">array_submit</a></span>(</a>
<a class="sourceLine" id="cb7-15" data-line-number="15">        <span class="dt">job_bash =</span> <span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(job_name, <span class="st">'.sh'</span>),</a>
<a class="sourceLine" id="cb7-16" data-line-number="16">        <span class="dt">task_ids =</span> task_ids,</a>
<a class="sourceLine" id="cb7-17" data-line-number="17">        <span class="dt">submit =</span> <span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb7-18" data-line-number="18">    )</a>
<a class="sourceLine" id="cb7-19" data-line-number="19"></a>
<a class="sourceLine" id="cb7-20" data-line-number="20">})</a>
<a class="sourceLine" id="cb7-21" data-line-number="21"><span class="co">#&gt; 2019-11-07 12:27:44 creating the logs directory at:  logs</span></a>
<a class="sourceLine" id="cb7-22" data-line-number="22"><span class="co">#&gt; 2019-11-07 12:27:44 creating the shell file array_submit_example_2019-11-07.sh</span></a>
<a class="sourceLine" id="cb7-23" data-line-number="23"><span class="co">#&gt; To submit the job use: qsub array_submit_example_2019-11-07.sh</span></a>
<a class="sourceLine" id="cb7-24" data-line-number="24"><span class="co">#&gt; 2019-11-07 12:27:44 resubmitting the SGE job for task 225001-225007:1</span></a>
<a class="sourceLine" id="cb7-25" data-line-number="25"><span class="co">#&gt; qsub array_submit_example_2019-11-07.sh</span></a>
<a class="sourceLine" id="cb7-26" data-line-number="26"><span class="co">#&gt; 2019-11-07 12:27:44 resubmitting the SGE job for task 225009-225017:2</span></a>
<a class="sourceLine" id="cb7-27" data-line-number="27"><span class="co">#&gt; qsub array_submit_example_2019-11-07.sh</span></a>
<a class="sourceLine" id="cb7-28" data-line-number="28"><span class="co">#&gt; 2019-11-07 12:27:44 resubmitting the SGE job for task 225019-225038:1</span></a>
<a class="sourceLine" id="cb7-29" data-line-number="29"><span class="co">#&gt; qsub array_submit_example_2019-11-07.sh</span></a>
<a class="sourceLine" id="cb7-30" data-line-number="30"><span class="co">#&gt; 2019-11-07 12:27:44 resubmitting the SGE job for task 225040-225040</span></a>
<a class="sourceLine" id="cb7-31" data-line-number="31"><span class="co">#&gt; qsub array_submit_example_2019-11-07.sh</span></a>
<a class="sourceLine" id="cb7-32" data-line-number="32"><span class="co">#&gt; 2019-11-07 12:27:44 resubmitting the SGE job for task 225043-225043</span></a>
<a class="sourceLine" id="cb7-33" data-line-number="33"><span class="co">#&gt; qsub array_submit_example_2019-11-07.sh</span></a>
<a class="sourceLine" id="cb7-34" data-line-number="34"><span class="co">#&gt; 2019-11-07 12:27:44 resubmitting the SGE job for task 225047-225047</span></a>
<a class="sourceLine" id="cb7-35" data-line-number="35"><span class="co">#&gt; qsub array_submit_example_2019-11-07.sh</span></a>
<a class="sourceLine" id="cb7-36" data-line-number="36"><span class="co">#&gt; 2019-11-07 12:27:44 resubmitting the SGE job for task 225049-225049</span></a>
<a class="sourceLine" id="cb7-37" data-line-number="37"><span class="co">#&gt; qsub array_submit_example_2019-11-07.sh</span></a>
<a class="sourceLine" id="cb7-38" data-line-number="38"><span class="co">#&gt; [1] "array_submit_example_2019-11-07.sh"</span></a></code></pre></div>
<p>Another scenario that you might run when submitting SGE array jobs is that there is a limit on the number of tasks a job can have. For example, at JHPCE that limit is 75,000. If you have a job with 150,000 tasks, you could submit first a job for tasks 1 till 75,000 then a second one for 75,001 to 150,000. However, to simplify this process, <a href="../articles/array_submit_num.html"><code><a href="../reference/array_submit_num.html">array_submit_num()</a></code></a> does this for you.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co">## Choose a script name</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2">job_name &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">'array_submit_num_example_'</span>, <span class="kw"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span>())</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">## Create an array job on the temporary directory</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="kw"><a href="../reference/with_wd.html">with_wd</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(), {</a>
<a class="sourceLine" id="cb8-6" data-line-number="6">    <span class="co">## Create an array job script to use for this example</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7">    <span class="kw"><a href="../reference/job_single.html">job_single</a></span>(</a>
<a class="sourceLine" id="cb8-8" data-line-number="8">        <span class="dt">name =</span> job_name,</a>
<a class="sourceLine" id="cb8-9" data-line-number="9">        <span class="dt">create_shell =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb8-10" data-line-number="10">        <span class="dt">task_num =</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11">    )</a>
<a class="sourceLine" id="cb8-12" data-line-number="12"></a>
<a class="sourceLine" id="cb8-13" data-line-number="13">    <span class="co">## Now we can submit the SGE job for a given number of tasks</span></a>
<a class="sourceLine" id="cb8-14" data-line-number="14">    <span class="kw"><a href="../reference/array_submit_num.html">array_submit_num</a></span>(</a>
<a class="sourceLine" id="cb8-15" data-line-number="15">        <span class="dt">job_bash =</span> <span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(job_name, <span class="st">'.sh'</span>),</a>
<a class="sourceLine" id="cb8-16" data-line-number="16">        <span class="dt">array_num =</span> <span class="dv">150000</span>,</a>
<a class="sourceLine" id="cb8-17" data-line-number="17">        <span class="dt">submit =</span> <span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb8-18" data-line-number="18">    )</a>
<a class="sourceLine" id="cb8-19" data-line-number="19"></a>
<a class="sourceLine" id="cb8-20" data-line-number="20">})</a>
<a class="sourceLine" id="cb8-21" data-line-number="21"><span class="co">#&gt; 2019-11-07 12:27:44 creating the logs directory at:  logs</span></a>
<a class="sourceLine" id="cb8-22" data-line-number="22"><span class="co">#&gt; 2019-11-07 12:27:44 creating the shell file array_submit_num_example_2019-11-07.sh</span></a>
<a class="sourceLine" id="cb8-23" data-line-number="23"><span class="co">#&gt; To submit the job use: qsub array_submit_num_example_2019-11-07.sh</span></a>
<a class="sourceLine" id="cb8-24" data-line-number="24"><span class="co">#&gt; 2019-11-07 12:27:44 resubmitting the SGE job for task 1-75000</span></a>
<a class="sourceLine" id="cb8-25" data-line-number="25"><span class="co">#&gt; qsub array_submit_num_example_2019-11-07.sh</span></a>
<a class="sourceLine" id="cb8-26" data-line-number="26"><span class="co">#&gt; 2019-11-07 12:27:44 resubmitting the SGE job for task 75001-150000</span></a>
<a class="sourceLine" id="cb8-27" data-line-number="27"><span class="co">#&gt; qsub array_submit_num_example_2019-11-07.sh</span></a>
<a class="sourceLine" id="cb8-28" data-line-number="28"><span class="co">#&gt; [1] "array_submit_num_example_2019-11-07.sh"</span></a></code></pre></div>
</div>
<div id="sge-job-log-files-and-accounting" class="section level2">
<h2 class="hasAnchor">
<a href="#sge-job-log-files-and-accounting" class="anchor"></a>SGE job log files and accounting</h2>
<p>If you built your SGE job <code>bash</code> scripts using the functions from this package, you can extract information from the log files such as the date when the job started and ended as well as the SGE job ID. These two pieces of information can be extracted using <a href="../articles/log_date.html"><code><a href="../reference/log_date.html">log_date()</a></code></a> and <a href="../articles/log_jobid.html"><code><a href="../reference/log_jobid.html">log_jobid()</a></code></a> as shown below:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co">## Example log file</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2">bsp2_log &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">'extdata'</span>, <span class="st">'logs'</span>, <span class="st">'delete_bsp2.txt'</span>, <span class="dt">package =</span> <span class="st">'sgejobs'</span>)</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co">## Find start/end dates</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="kw"><a href="../reference/log_date.html">log_date</a></span>(bsp2_log)</a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="co">#&gt;                     start                       end </span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co">#&gt; "2019-09-07 14:40:21 EST" "2019-09-07 14:40:59 EST"</span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"></a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="co">## Find job id</span></a>
<a class="sourceLine" id="cb9-10" data-line-number="10"><span class="kw"><a href="../reference/log_jobid.html">log_jobid</a></span>(bsp2_log)</a>
<a class="sourceLine" id="cb9-11" data-line-number="11"><span class="co">#&gt; [1] "92500"</span></a></code></pre></div>
<p>The idea was that these two functions along with a third function (that is yet to be implemented) would help you find the accounting file for a given SGE job, such that you could extract the accounting information using <code>qacct</code> from that given file. For example, <code>qacct -f /cm/shared/apps/sge/sge-8.1.9/default/common/accounting_20191007_0300.txt -j 92500</code>.</p>
<p>In any case, once you have the SGE job id (be it an array job or not), you can extract the information using the <a href="../articles/accounting.html"><code><a href="../reference/accounting.html">accounting()</a></code></a> functions. Since some require that <code>qacct</code> be available on your system, we split the code into functions that read the data and parse it.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="co">## If you are at JHPCE you can run this:</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="cf">if</span>(<span class="ot">FALSE</span>) {</a>
<a class="sourceLine" id="cb10-3" data-line-number="3">  <span class="kw"><a href="../reference/accounting.html">accounting</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'92500'</span>, <span class="st">'77672'</span>),</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">      <span class="st">'/cm/shared/apps/sge/sge-8.1.9/default/common/accounting_20191007_0300.txt'</span>)</a>
<a class="sourceLine" id="cb10-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb10-6" data-line-number="6"></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co">## However, if you are not at JHPCE, we included some example data</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="co"># Here we use the data included in the package to avoid depending on JHPCE</span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="co">## where the data for job 77672 has been subset for the first two tasks.</span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11">accounting_info &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(</a>
<a class="sourceLine" id="cb10-12" data-line-number="12">    <span class="st">'92500'</span> =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/readLines.html">readLines</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">'extdata'</span>, <span class="st">'accounting'</span>, <span class="st">'92500.txt'</span>,</a>
<a class="sourceLine" id="cb10-13" data-line-number="13">        <span class="dt">package =</span> <span class="st">'sgejobs'</span>)),</a>
<a class="sourceLine" id="cb10-14" data-line-number="14">    <span class="st">'77672'</span> =<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/readLines.html">readLines</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">'extdata'</span>, <span class="st">'accounting'</span>, <span class="st">'77672.txt'</span>,</a>
<a class="sourceLine" id="cb10-15" data-line-number="15">        <span class="dt">package =</span> <span class="st">'sgejobs'</span>))</a>
<a class="sourceLine" id="cb10-16" data-line-number="16">)</a>
<a class="sourceLine" id="cb10-17" data-line-number="17"></a>
<a class="sourceLine" id="cb10-18" data-line-number="18"><span class="co">## Here we parse the data from `qacct` into a data.frame</span></a>
<a class="sourceLine" id="cb10-19" data-line-number="19">res &lt;-<span class="st"> </span><span class="kw"><a href="../reference/accounting.html">accounting_parse</a></span>(accounting_info)</a>
<a class="sourceLine" id="cb10-20" data-line-number="20"><span class="co">#&gt; 2019-11-07 12:27:44 processing job 92500</span></a>
<a class="sourceLine" id="cb10-21" data-line-number="21"><span class="co">#&gt; 2019-11-07 12:27:44 processing job 77672</span></a>
<a class="sourceLine" id="cb10-22" data-line-number="22"><span class="co">#&gt; Note: the column 'mem' is now in bytes / second.</span></a>
<a class="sourceLine" id="cb10-23" data-line-number="23">res</a>
<a class="sourceLine" id="cb10-24" data-line-number="24"><span class="co">#&gt;   input_id account ar_sub_time      arid</span></a>
<a class="sourceLine" id="cb10-25" data-line-number="25"><span class="co">#&gt; 1  77672.1     sge   undefined undefined</span></a>
<a class="sourceLine" id="cb10-26" data-line-number="26"><span class="co">#&gt; 2  77672.2     sge   undefined undefined</span></a>
<a class="sourceLine" id="cb10-27" data-line-number="27"><span class="co">#&gt; 3  92500.0     sge   undefined undefined</span></a>
<a class="sourceLine" id="cb10-28" data-line-number="28"><span class="co">#&gt;                                                                     category</span></a>
<a class="sourceLine" id="cb10-29" data-line-number="29"><span class="co">#&gt; 1 -u lcollado -l h_fsize=100G,h_stack=512M,h_vmem=3G,mem_free=3G -pe local 4</span></a>
<a class="sourceLine" id="cb10-30" data-line-number="30"><span class="co">#&gt; 2 -u lcollado -l h_fsize=100G,h_stack=512M,h_vmem=3G,mem_free=3G -pe local 4</span></a>
<a class="sourceLine" id="cb10-31" data-line-number="31"><span class="co">#&gt; 3           -u lcollado -l h_fsize=100G,h_stack=512M,h_vmem=10G,mem_free=10G</span></a>
<a class="sourceLine" id="cb10-32" data-line-number="32"><span class="co">#&gt;        cpu        department            end_time exit_status failed</span></a>
<a class="sourceLine" id="cb10-33" data-line-number="33"><span class="co">#&gt; 1 747.887s defaultdepartment 2019-09-04 11:55:14           0      0</span></a>
<a class="sourceLine" id="cb10-34" data-line-number="34"><span class="co">#&gt; 2 878.682s defaultdepartment 2019-09-04 12:00:26           0      0</span></a>
<a class="sourceLine" id="cb10-35" data-line-number="35"><span class="co">#&gt; 3   1.559s defaultdepartment 2019-09-07 14:40:59           0      0</span></a>
<a class="sourceLine" id="cb10-36" data-line-number="36"><span class="co">#&gt;   granted_pe        group               hostname          io    iow</span></a>
<a class="sourceLine" id="cb10-37" data-line-number="37"><span class="co">#&gt; 1      local lieber_jaffe compute-051.cm.cluster 41198000000 0.000s</span></a>
<a class="sourceLine" id="cb10-38" data-line-number="38"><span class="co">#&gt; 2      local lieber_jaffe compute-051.cm.cluster 35579000000 0.000s</span></a>
<a class="sourceLine" id="cb10-39" data-line-number="39"><span class="co">#&gt; 3       NONE lieber_jaffe compute-089.cm.cluster      779092 0.000s</span></a>
<a class="sourceLine" id="cb10-40" data-line-number="40"><span class="co">#&gt;                                 jobname jobnumber   maxvmem         mem</span></a>
<a class="sourceLine" id="cb10-41" data-line-number="41"><span class="co">#&gt; 1 compute_aucs_duplicatesRemoved_v0.4.0     77672 953344000 6.93543e+11</span></a>
<a class="sourceLine" id="cb10-42" data-line-number="42"><span class="co">#&gt; 2 compute_aucs_duplicatesRemoved_v0.4.0     77672 953348000 6.31653e+11</span></a>
<a class="sourceLine" id="cb10-43" data-line-number="43"><span class="co">#&gt; 3                           delete_bsp2     92500   5867000 6.07126e+05</span></a>
<a class="sourceLine" id="cb10-44" data-line-number="44"><span class="co">#&gt;      owner priority project    qname           qsub_time ru_idrss</span></a>
<a class="sourceLine" id="cb10-45" data-line-number="45"><span class="co">#&gt; 1 lcollado        0    NONE shared.q 2019-09-04 11:45:54        0</span></a>
<a class="sourceLine" id="cb10-46" data-line-number="46"><span class="co">#&gt; 2 lcollado        0    NONE shared.q 2019-09-04 11:45:54        0</span></a>
<a class="sourceLine" id="cb10-47" data-line-number="47"><span class="co">#&gt; 3 lcollado        0    NONE shared.q 2019-09-07 14:40:00        0</span></a>
<a class="sourceLine" id="cb10-48" data-line-number="48"><span class="co">#&gt;   ru_inblock ru_ismrss ru_isrss ru_ixrss ru_majflt ru_maxrss ru_minflt</span></a>
<a class="sourceLine" id="cb10-49" data-line-number="49"><span class="co">#&gt; 1   33755664         0        0        0         1    953348    124265</span></a>
<a class="sourceLine" id="cb10-50" data-line-number="50"><span class="co">#&gt; 2   40880344         0        0        0         0    953348    132866</span></a>
<a class="sourceLine" id="cb10-51" data-line-number="51"><span class="co">#&gt; 3         64         0        0        0         0      7004     53903</span></a>
<a class="sourceLine" id="cb10-52" data-line-number="52"><span class="co">#&gt;   ru_msgrcv ru_msgsnd ru_nivcsw ru_nsignals ru_nswap ru_nvcsw ru_oublock</span></a>
<a class="sourceLine" id="cb10-53" data-line-number="53"><span class="co">#&gt; 1         0         0     44094           0        0  3237249        192</span></a>
<a class="sourceLine" id="cb10-54" data-line-number="54"><span class="co">#&gt; 2         0         0     63844           0        0  3572098        192</span></a>
<a class="sourceLine" id="cb10-55" data-line-number="55"><span class="co">#&gt; 3         0         0       107           0        0     8837        184</span></a>
<a class="sourceLine" id="cb10-56" data-line-number="56"><span class="co">#&gt;   ru_stime ru_utime ru_wallclock slots          start_time    taskid</span></a>
<a class="sourceLine" id="cb10-57" data-line-number="57"><span class="co">#&gt; 1 135.616s 612.272s         526s     4 2019-09-04 11:46:28         1</span></a>
<a class="sourceLine" id="cb10-58" data-line-number="58"><span class="co">#&gt; 2 155.540s 723.142s         832s     4 2019-09-04 11:46:34         2</span></a>
<a class="sourceLine" id="cb10-59" data-line-number="59"><span class="co">#&gt; 3   0.814s   0.745s          43s     1 2019-09-07 14:40:16 undefined</span></a>
<a class="sourceLine" id="cb10-60" data-line-number="60"></a>
<a class="sourceLine" id="cb10-61" data-line-number="61"><span class="co">## Check the maximum memory use</span></a>
<a class="sourceLine" id="cb10-62" data-line-number="62">res<span class="op">$</span>maxvmem</a>
<a class="sourceLine" id="cb10-63" data-line-number="63"><span class="co">#&gt; 953.00953.00  5.87 MB</span></a>
<a class="sourceLine" id="cb10-64" data-line-number="64"></a>
<a class="sourceLine" id="cb10-65" data-line-number="65"><span class="co">## The minimum memory (from the maxvmem) used</span></a>
<a class="sourceLine" id="cb10-66" data-line-number="66">pryr<span class="op">:::</span><span class="kw">show_bytes</span>(<span class="kw"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span>(res<span class="op">$</span>maxvmem))</a>
<a class="sourceLine" id="cb10-67" data-line-number="67"><span class="co">#&gt; 5.87 MB</span></a>
<a class="sourceLine" id="cb10-68" data-line-number="68"></a>
<a class="sourceLine" id="cb10-69" data-line-number="69"><span class="co">## And the absolute maximum</span></a>
<a class="sourceLine" id="cb10-70" data-line-number="70">pryr<span class="op">:::</span><span class="kw">show_bytes</span>(<span class="kw"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span>(res<span class="op">$</span>maxvmem))</a>
<a class="sourceLine" id="cb10-71" data-line-number="71"><span class="co">#&gt; 953 MB</span></a></code></pre></div>
<p>The <a href="../articles/accounting.html"><code><a href="../reference/accounting.html">accounting()</a></code></a> functions will work for array jobs as well as regular jobs which can be helpful to identify if some tasks are failing (<code>exit_status</code> other than 0) as well as their maximum memory use. From these functions you can store more information about your SGE jobs than the one you get from the automatic emails (<code>#$ -m e</code>).</p>
</div>
<div id="conclusions" class="section level2">
<h2 class="hasAnchor">
<a href="#conclusions" class="anchor"></a>Conclusions</h2>
<p>We hope that the functions in <em><a href="https://github.com/LieberInstitute/sgejobs">sgejobs</a></em> will make your work more reprocible and your life easier in terms of interacting with SGE. If you think of other potential use cases for <em><a href="https://github.com/LieberInstitute/sgejobs">sgejobs</a></em> please let us know. Also note that you might be interested in <em><a href="https://github.com/muschellij2/clusterRundown">clusterRundown</a></em> written by John Muschelli for getting a rundown of cluster resources through <code>qstat</code>, <code>qmem</code>, <code>qhost</code> as well as <code>qacct</code>.</p>
</div>
</div>
<div id="reproducibility" class="section level1">
<h1 class="hasAnchor">
<a href="#reproducibility" class="anchor"></a>Reproducibility</h1>
<p>The <em><a href="https://github.com/LieberInstitute/sgejobs">sgejobs</a></em> package <a id="cite-Collado-Torres_2019"></a>(<a href="https://github.com/LieberInstitute/sgejobs">Collado-Torres, 2019</a>) was made possible thanks to:</p>
<ul>
<li>R <a id="cite-R_Core_Team_2019"></a>(<a href="https://www.R-project.org/">R Core Team, 2019</a>)</li>
<li>
<em><a href="https://bioconductor.org/packages/3.9/BiocStyle">BiocStyle</a></em> <a id="cite-Oles_2019"></a>(<a href="https://github.com/Bioconductor/BiocStyle">Oleś, Morgan, and Huber, 2019</a>)</li>
<li>
<em><a href="https://CRAN.R-project.org/package=glue">glue</a></em> <a id="cite-Hester_2019"></a>(<a href="https://CRAN.R-project.org/package=glue">Hester, 2019</a>)</li>
<li>
<em><a href="https://CRAN.R-project.org/package=knitcitations">knitcitations</a></em> <a id="cite-Boettiger_2019"></a>(<a href="https://CRAN.R-project.org/package=knitcitations">Boettiger, 2019</a>)</li>
<li>
<em><a href="https://CRAN.R-project.org/package=lubridate">lubridate</a></em> <a id="cite-Grolemund_2011"></a>(<a href="http://www.jstatsoft.org/v40/i03/">Grolemund and Wickham, 2011</a>)</li>
<li>
<em><a href="https://CRAN.R-project.org/package=pryr">pryr</a></em> <a id="cite-Wickham_2018"></a>(<a href="https://CRAN.R-project.org/package=pryr">Wickham, 2018</a>)</li>
<li>
<em><a href="https://CRAN.R-project.org/package=purrr">purrr</a></em> <a id="cite-Henry_2019"></a>(<a href="https://CRAN.R-project.org/package=purrr">Henry and Wickham, 2019</a>)</li>
<li>
<em><a href="https://CRAN.R-project.org/package=remotes">remotes</a></em> <a id="cite-Hester_2019a"></a>(<a href="https://github.com/r-lib/remotes#readme">Hester, Csárdi, Wickham, Chang, et al., 2019</a>)</li>
<li>
<em><a href="https://CRAN.R-project.org/package=readr">readr</a></em> <a id="cite-Wickham_2018a"></a>(<a href="https://CRAN.R-project.org/package=readr">Wickham, Hester, and Francois, 2018</a>)</li>
<li>
<em><a href="https://CRAN.R-project.org/package=rmarkdown">rmarkdown</a></em> <a id="cite-Allaire_2019"></a>(<a href="https://github.com/rstudio/rmarkdown">Allaire, Xie, McPherson, Luraschi, et al., 2019</a>)</li>
<li>
<em><a href="https://CRAN.R-project.org/package=sessioninfo">sessioninfo</a></em> <a id="cite-Csardi_2018"></a>(<a href="https://CRAN.R-project.org/package=sessioninfo">Csárdi, core, Wickham, Chang, et al., 2018</a>)</li>
<li>
<em><a href="https://CRAN.R-project.org/package=testthat">testthat</a></em> <a id="cite-Wickham_2011"></a>(<a href="https://journal.r-project.org/archive/2011-1/RJournal_2011-1_Wickham.pdf">Wickham, 2011</a>)</li>
<li>
<em><a href="https://CRAN.R-project.org/package=tidyr">tidyr</a></em> <a id="cite-Wickham_2019"></a>(<a href="https://CRAN.R-project.org/package=tidyr">Wickham and Henry, 2019</a>)</li>
</ul>
<p>Code for creating the vignette</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co">## Create the vignette</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">'rmarkdown'</span>)</a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/base/system.time.html">system.time</a></span>(<span class="kw"><a href="https://rdrr.io/pkg/rmarkdown/man/render.html">render</a></span>(<span class="st">'sgejobs-quickstart.Rmd'</span>, <span class="st">'BiocStyle::html_document'</span>))</a>
<a class="sourceLine" id="cb11-4" data-line-number="4"></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="co">## Extract the R code</span></a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">'knitr'</span>)</a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="kw"><a href="https://rdrr.io/pkg/knitr/man/knit.html">knit</a></span>(<span class="st">'sgejobs-quickstart.Rmd'</span>, <span class="dt">tangle =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p>Date the vignette was generated.</p>
<pre><code>#&gt; [1] "2019-11-07 12:27:45 EST"</code></pre>
<p>Wallclock time spent generating the vignette.</p>
<pre><code>#&gt; Time difference of 8.041 secs</code></pre>
<p><code>R</code> session information.</p>
<pre><code>#&gt; ─ Session info ───────────────────────────────────────────────────────────────────────────────────────────────────────
#&gt;  setting  value                                      
#&gt;  version  R version 3.6.1 Patched (2019-09-06 r77160)
#&gt;  os       CentOS Linux 7 (Core)                      
#&gt;  system   x86_64, linux-gnu                          
#&gt;  ui       X11                                        
#&gt;  language (EN)                                       
#&gt;  collate  en_US.UTF-8                                
#&gt;  ctype    en_US.UTF-8                                
#&gt;  tz       US/Eastern                                 
#&gt;  date     2019-11-07                                 
#&gt; 
#&gt; ─ Packages ───────────────────────────────────────────────────────────────────────────────────────────────────────────
#&gt;  package       * version  date       lib source        
#&gt;  assertthat      0.2.1    2019-03-21 [3] CRAN (R 3.6.1)
#&gt;  backports       1.1.5    2019-10-02 [2] CRAN (R 3.6.1)
#&gt;  bibtex          0.4.2    2017-06-30 [2] CRAN (R 3.6.1)
#&gt;  BiocManager     1.30.9   2019-10-23 [2] CRAN (R 3.6.1)
#&gt;  BiocStyle     * 2.12.0   2019-05-02 [2] Bioconductor  
#&gt;  bookdown        0.14     2019-10-01 [2] CRAN (R 3.6.1)
#&gt;  cli             1.1.0    2019-03-19 [2] CRAN (R 3.6.1)
#&gt;  codetools       0.2-16   2018-12-24 [4] CRAN (R 3.6.1)
#&gt;  crayon          1.3.4    2017-09-16 [2] CRAN (R 3.6.1)
#&gt;  curl            4.2      2019-09-24 [2] CRAN (R 3.6.1)
#&gt;  desc            1.2.0    2018-05-01 [3] CRAN (R 3.6.1)
#&gt;  digest          0.6.22   2019-10-21 [2] CRAN (R 3.6.1)
#&gt;  dplyr           0.8.3    2019-07-04 [2] CRAN (R 3.6.1)
#&gt;  evaluate        0.14     2019-05-28 [2] CRAN (R 3.6.1)
#&gt;  fs              1.3.1    2019-05-06 [2] CRAN (R 3.6.1)
#&gt;  glue            1.3.1    2019-03-12 [2] CRAN (R 3.6.1)
#&gt;  hms             0.5.2    2019-10-30 [2] CRAN (R 3.6.1)
#&gt;  htmltools       0.4.0    2019-10-04 [2] CRAN (R 3.6.1)
#&gt;  httr            1.4.1    2019-08-05 [2] CRAN (R 3.6.1)
#&gt;  jsonlite        1.6      2018-12-07 [3] CRAN (R 3.6.1)
#&gt;  knitcitations * 1.0.10   2019-09-15 [2] CRAN (R 3.6.1)
#&gt;  knitr           1.25     2019-09-18 [2] CRAN (R 3.6.1)
#&gt;  lifecycle       0.1.0    2019-08-01 [2] CRAN (R 3.6.1)
#&gt;  lubridate       1.7.4    2018-04-11 [2] CRAN (R 3.6.1)
#&gt;  magrittr        1.5      2014-11-22 [2] CRAN (R 3.6.1)
#&gt;  MASS            7.3-51.4 2019-03-31 [4] CRAN (R 3.6.1)
#&gt;  memoise         1.1.0    2017-04-21 [3] CRAN (R 3.6.1)
#&gt;  pillar          1.4.2    2019-06-29 [2] CRAN (R 3.6.1)
#&gt;  pkgconfig       2.0.3    2019-09-22 [2] CRAN (R 3.6.1)
#&gt;  pkgdown         1.4.1    2019-09-15 [2] CRAN (R 3.6.1)
#&gt;  plyr            1.8.4    2016-06-08 [3] CRAN (R 3.6.1)
#&gt;  pryr            0.1.4    2018-02-18 [3] CRAN (R 3.6.1)
#&gt;  purrr           0.3.3    2019-10-18 [2] CRAN (R 3.6.1)
#&gt;  R6              2.4.0    2019-02-14 [3] CRAN (R 3.6.1)
#&gt;  Rcpp            1.0.2    2019-07-25 [2] CRAN (R 3.6.1)
#&gt;  readr           1.3.1    2018-12-21 [2] CRAN (R 3.6.1)
#&gt;  RefManageR      1.2.12   2019-04-03 [2] CRAN (R 3.6.1)
#&gt;  rlang           0.4.1    2019-10-24 [2] CRAN (R 3.6.1)
#&gt;  rmarkdown       1.16     2019-10-01 [2] CRAN (R 3.6.1)
#&gt;  rprojroot       1.3-2    2018-01-03 [3] CRAN (R 3.6.1)
#&gt;  sessioninfo   * 1.1.1    2018-11-05 [2] CRAN (R 3.6.1)
#&gt;  sgejobs       * 0.99.1   2019-11-07 [1] local         
#&gt;  stringi         1.4.3    2019-03-12 [3] CRAN (R 3.6.1)
#&gt;  stringr         1.4.0    2019-02-10 [2] CRAN (R 3.6.1)
#&gt;  tibble          2.1.3    2019-06-06 [2] CRAN (R 3.6.1)
#&gt;  tidyr           1.0.0    2019-09-11 [2] CRAN (R 3.6.1)
#&gt;  tidyselect      0.2.5    2018-10-11 [3] CRAN (R 3.6.1)
#&gt;  vctrs           0.2.0    2019-07-05 [2] CRAN (R 3.6.1)
#&gt;  withr           2.1.2    2018-03-15 [3] CRAN (R 3.6.1)
#&gt;  xfun            0.10     2019-10-01 [2] CRAN (R 3.6.1)
#&gt;  xml2            1.2.2    2019-08-09 [3] CRAN (R 3.6.1)
#&gt;  yaml            2.2.0    2018-07-25 [3] CRAN (R 3.6.1)
#&gt;  zeallot         0.1.0    2018-01-28 [2] CRAN (R 3.6.1)
#&gt; 
#&gt; [1] /tmp/RtmpPuHpZV/temp_libpathc0156f76289d
#&gt; [2] /users/lcollado/R/3.6
#&gt; [3] /jhpce/shared/jhpce/core/conda/miniconda3-4.6.14/envs/svnR-3.6/R/3.6/lib64/R/site-library
#&gt; [4] /jhpce/shared/jhpce/core/conda/miniconda3-4.6.14/envs/svnR-3.6/R/3.6/lib64/R/library</code></pre>
</div>
<div id="bibliography" class="section level1">
<h1 class="hasAnchor">
<a href="#bibliography" class="anchor"></a>Bibliography</h1>
<p>This vignette was generated using <em><a href="https://bioconductor.org/packages/3.9/BiocStyle">BiocStyle</a></em> (<a href="https://github.com/Bioconductor/BiocStyle">Oleś, Morgan, and Huber, 2019</a>) with <em><a href="https://CRAN.R-project.org/package=knitr">knitr</a></em> <a id="cite-Xie_2014"></a>(<a href="http://www.crcpress.com/product/isbn/9781466561595">Xie, 2014</a>) and <em><a href="https://CRAN.R-project.org/package=rmarkdown">rmarkdown</a></em> (<a href="https://github.com/rstudio/rmarkdown">Allaire, Xie, McPherson, Luraschi, et al., 2019</a>) running behind the scenes.</p>
<p>Citations made with <em><a href="https://CRAN.R-project.org/package=knitcitations">knitcitations</a></em> (<a href="https://CRAN.R-project.org/package=knitcitations">Boettiger, 2019</a>).</p>
<p>[1] J. Allaire, Y. Xie, J. McPherson, J. Luraschi, et al. <em>rmarkdown: Dynamic Documents for R</em>. R package version 1.16. 2019. &lt;URL: <a href="https://github.com/rstudio/rmarkdown" class="uri">https://github.com/rstudio/rmarkdown</a>&gt;.</p>
<p>[2] C. Boettiger. <em>knitcitations: Citations for ‘Knitr’ Markdown Files</em>. R package version 1.0.10. 2019. &lt;URL: <a href="https://CRAN.R-project.org/package=knitcitations" class="uri">https://CRAN.R-project.org/package=knitcitations</a>&gt;.</p>
<p>[3] L. Collado-Torres. <em>sgejobs: Helper functions for SGE jobs at JHPCE</em>. R package version 0.99.1. 2019. &lt;URL: <a href="https://github.com/LieberInstitute/sgejobs" class="uri">https://github.com/LieberInstitute/sgejobs</a>&gt;.</p>
<p>[4] L. Collado-Torres, E. E. Burke, A. Peterson, J. Shin, et al. “Regional Heterogeneity in Gene Expression, Regulation, and Coherence in the Frontal Cortex and Hippocampus across Development and Schizophrenia”. In: <em>Neuron</em> 103.2 (Jul. 2019), pp. 203-216.e8. DOI: 10.1016/j.neuron.2019.05.013. &lt;URL: <a href="https://doi.org/10.1016/j.neuron.2019.05.013" class="uri">https://doi.org/10.1016/j.neuron.2019.05.013</a>&gt;.</p>
<p>[5] G. Csárdi, R. core, H. Wickham, W. Chang, et al. <em>sessioninfo: R Session Information</em>. R package version 1.1.1. 2018. &lt;URL: <a href="https://CRAN.R-project.org/package=sessioninfo" class="uri">https://CRAN.R-project.org/package=sessioninfo</a>&gt;.</p>
<p>[6] G. Grolemund and H. Wickham. “Dates and Times Made Easy with lubridate”. In: <em>Journal of Statistical Software</em> 40.3 (2011), pp. 1-25. &lt;URL: <a href="http://www.jstatsoft.org/v40/i03/" class="uri">http://www.jstatsoft.org/v40/i03/</a>&gt;.</p>
<p>[7] L. Henry and H. Wickham. <em>purrr: Functional Programming Tools</em>. R package version 0.3.3. 2019. &lt;URL: <a href="https://CRAN.R-project.org/package=purrr" class="uri">https://CRAN.R-project.org/package=purrr</a>&gt;.</p>
<p>[8] J. Hester. <em>glue: Interpreted String Literals</em>. R package version 1.3.1. 2019. &lt;URL: <a href="https://CRAN.R-project.org/package=glue" class="uri">https://CRAN.R-project.org/package=glue</a>&gt;.</p>
<p>[9] J. Hester, G. Csárdi, H. Wickham, W. Chang, et al. <em>remotes: R Package Installation from Remote Repositories, Including ‘GitHub’</em>. R package version 2.1.0.9000. 2019. &lt;URL: <a href="https://github.com/r-lib/remotes#readme" class="uri">https://github.com/r-lib/remotes#readme</a>&gt;.</p>
<p>[10] A. Oleś, M. Morgan, and W. Huber. <em>BiocStyle: Standard styles for vignettes and other Bioconductor documents</em>. R package version 2.12.0. 2019. &lt;URL: <a href="https://github.com/Bioconductor/BiocStyle" class="uri">https://github.com/Bioconductor/BiocStyle</a>&gt;.</p>
<p>[11] R Core Team. <em>R: A Language and Environment for Statistical Computing</em>. R Foundation for Statistical Computing. Vienna, Austria, 2019. &lt;URL: <a href="https://www.R-project.org/" class="uri">https://www.R-project.org/</a>&gt;.</p>
<p>[12] H. Wickham. <em>pryr: Tools for Computing on the Language</em>. R package version 0.1.4. 2018. &lt;URL: <a href="https://CRAN.R-project.org/package=pryr" class="uri">https://CRAN.R-project.org/package=pryr</a>&gt;.</p>
<p>[13] H. Wickham. “testthat: Get Started with Testing”. In: <em>The R Journal</em> 3 (2011), pp. 5-10. &lt;URL: <a href="https://journal.r-project.org/archive/2011-1/RJournal_2011-1_Wickham.pdf" class="uri">https://journal.r-project.org/archive/2011-1/RJournal_2011-1_Wickham.pdf</a>&gt;.</p>
<p>[14] H. Wickham and L. Henry. <em>tidyr: Tidy Messy Data</em>. R package version 1.0.0. 2019. &lt;URL: <a href="https://CRAN.R-project.org/package=tidyr" class="uri">https://CRAN.R-project.org/package=tidyr</a>&gt;.</p>
<p>[15] H. Wickham, J. Hester, and R. Francois. <em>readr: Read Rectangular Text Data</em>. R package version 1.3.1. 2018. &lt;URL: <a href="https://CRAN.R-project.org/package=readr" class="uri">https://CRAN.R-project.org/package=readr</a>&gt;.</p>
<p>[16] Y. Xie. “knitr: A Comprehensive Tool for Reproducible Research in R”. In: <em>Implementing Reproducible Computational Research</em>. Ed. by V. Stodden, F. Leisch and R. D. Peng. ISBN 978-1466561595. Chapman and Hall/CRC, 2014. &lt;URL: <a href="http://www.crcpress.com/product/isbn/9781466561595" class="uri">http://www.crcpress.com/product/isbn/9781466561595</a>&gt;.</p>
<p>Download the <a href="basics.bib">bibliography</a> file.</p>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>The open-source version of Sun Grid Engine.<a href="#fnref1" class="footnote-back">↩</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#basics">Basics</a><ul class="nav nav-pills nav-stacked">
<li><a href="#install-sgejobs">Install <em><span>sgejobs</span></em></a></li>
      <li><a href="#asking-for-help">Asking for help</a></li>
      <li><a href="#citing-sgejobs">Citing <em><span>sgejobs</span></em></a></li>
      </ul>
</li>
      <li>
<a href="#overview">Overview</a><ul class="nav nav-pills nav-stacked">
<li><a href="#creating-sge-job-bash-scripts">Creating SGE job <code>bash</code> scripts</a></li>
      <li><a href="#submitting-sge-jobs">Submitting SGE jobs</a></li>
      <li><a href="#sge-job-log-files-and-accounting">SGE job log files and accounting</a></li>
      <li><a href="#conclusions">Conclusions</a></li>
      </ul>
</li>
      <li><a href="#reproducibility">Reproducibility</a></li>
      <li><a href="#bibliography">Bibliography</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Leonardo Collado-Torres.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
